!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@material-ui/core"),require("class-autobind"),require("react-color"),require("clsx"),require("react-select"),require("@material-ui/core/styles"),require("@material-ui/core/MenuItem"),require("@material-ui/icons"),require("prop-types"),require("@material-ui/core/InputAdornment"),require("@material-ui/core/SvgIcon"),require("lodash/isBoolean"),require("@material-ui/core/CircularProgress"),require("@material-ui/core/Button"),require("@material-ui/core/Table"),require("@material-ui/core/TableBody"),require("@material-ui/core/TableCell"),require("@material-ui/core/TableHead"),require("@material-ui/core/TableRow"),require("@material-ui/core/Paper"),require("@material-ui/styles"),require("lodash"),require("@material-ui/core/TablePagination"),require("@material-ui/core/Chip"),require("redux-form"),require("@material-ui/core/Grid"),require("@material-ui/icons/Dehaze"),require("@material-ui/core/Typography/Typography"),require("@material-ui/core/Divider"),require("react-redux"),require("lodash/has"),require("@material-ui/core/TableSortLabel"),require("react-datepicker"),require("react-datepicker/dist/react-datepicker.css")):"function"==typeof define&&define.amd?define(["exports","react","@material-ui/core","class-autobind","react-color","clsx","react-select","@material-ui/core/styles","@material-ui/core/MenuItem","@material-ui/icons","prop-types","@material-ui/core/InputAdornment","@material-ui/core/SvgIcon","lodash/isBoolean","@material-ui/core/CircularProgress","@material-ui/core/Button","@material-ui/core/Table","@material-ui/core/TableBody","@material-ui/core/TableCell","@material-ui/core/TableHead","@material-ui/core/TableRow","@material-ui/core/Paper","@material-ui/styles","lodash","@material-ui/core/TablePagination","@material-ui/core/Chip","redux-form","@material-ui/core/Grid","@material-ui/icons/Dehaze","@material-ui/core/Typography/Typography","@material-ui/core/Divider","react-redux","lodash/has","@material-ui/core/TableSortLabel","react-datepicker","react-datepicker/dist/react-datepicker.css"],t):t((e=e||self)["material-ui-form-helpers"]={},e.React,e.core,e.autobind,e.reactColor,e.clsx,e.Select,e.styles$3,e.MenuItem,e.icons,e.PropTypes,e.InputAdornment,e.AccountCircle,e.isBoolean,e.CircularProgress,e.Button,e.Table$1,e.TableBody,e.TableCell,e.TableHead,e.TableRow,e.Paper,e.styles$4,e._,e.TablePagination,e.Chip,e.reduxForm,e.Grid,e.DehazeIcon,e.Typography,e.Divider,e.reactRedux,e.has,e.TableSortLabel,e.DatePicker)}(this,function(e,t,r,n,a,o,i,l,u,s,c,p,d,m,f,h,g,b,y,v,P,C,O,E,w,k,x,S,F,T,D,j,R,I,B){"use strict";var q="default"in t?t.default:t;function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function V(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){N(o,n,a,i,l,"next",e)}function l(e){N(o,n,a,i,l,"throw",e)}i(void 0)})}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,r){return t&&M(e.prototype,t),r&&M(e,r),e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach(function(t){L(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?J(e):t}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o,i=i&&i.hasOwnProperty("default")?i.default:i,u=u&&u.hasOwnProperty("default")?u.default:u,c=c&&c.hasOwnProperty("default")?c.default:c,p=p&&p.hasOwnProperty("default")?p.default:p,d=d&&d.hasOwnProperty("default")?d.default:d,m=m&&m.hasOwnProperty("default")?m.default:m,f=f&&f.hasOwnProperty("default")?f.default:f,h=h&&h.hasOwnProperty("default")?h.default:h,g=g&&g.hasOwnProperty("default")?g.default:g,b=b&&b.hasOwnProperty("default")?b.default:b,y=y&&y.hasOwnProperty("default")?y.default:y,v=v&&v.hasOwnProperty("default")?v.default:v,P=P&&P.hasOwnProperty("default")?P.default:P,C=C&&C.hasOwnProperty("default")?C.default:C,E=E&&E.hasOwnProperty("default")?E.default:E,w=w&&w.hasOwnProperty("default")?w.default:w,k=k&&k.hasOwnProperty("default")?k.default:k,S=S&&S.hasOwnProperty("default")?S.default:S,F=F&&F.hasOwnProperty("default")?F.default:F,T=T&&T.hasOwnProperty("default")?T.default:T,D=D&&D.hasOwnProperty("default")?D.default:D,R=R&&R.hasOwnProperty("default")?R.default:R,I=I&&I.hasOwnProperty("default")?I.default:I,B=B&&B.hasOwnProperty("default")?B.default:B;var Z=function(e){function t(e){var r;return A(this,t),r=Q(this,$(t).call(this,e)),n(J(r)),r.state={checked:!!e.checked},r}return U(t,q.Component),z(t,[{key:"handleChange",value:function(e){this.props.onChange(e),this.setState({checked:!this.state.checked})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.name;return q.createElement(r.FormControlLabel,{control:q.createElement(r.Checkbox,{checked:this.state.checked,color:"default",onChange:this.handleChange,value:n}),label:t})}}]),t}(),ee=function(e){function t(e){var r;return A(this,t),L(J(r=Q(this,$(t).call(this,e))),"handleColorChangeComplete",function(e){r.props.input.onBlur(e.hex),r.toggleColorPicker()}),L(J(r),"handleInputChange",function(e){r.props.input.onBlur(e.target.value)}),n(J(r)),r.state={openColorPicker:!1},r}return U(t,q.Component),z(t,[{key:"toggleColorPicker",value:function(){this.setState({openColorPicker:!this.state.openColorPicker})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.input,o=e.label,i=e.placeholder,l=this.state.openColorPicker;return q.createElement("div",{className:t.colorField},q.createElement(r.TextField,{margin:"dense",name:n.name,id:n.id,value:n.value,label:o,type:"text",placeholder:i,onChange:this.handleInputChange}),q.createElement("div",{className:t.colorDiv,style:{backgroundColor:n.value},onClick:this.toggleColorPicker}),l&&q.createElement(a.SketchPicker,{className:t.colorPicker,color:n.value,onChangeComplete:this.handleColorChangeComplete}))}}]),t}(),te=r.withStyles(function(e){return{title:{width:"500px",backgroundColor:"#edeeef"},colorField:{display:"flex",flexDirection:"row"},colorDiv:{marginTop:"15px",marginBottom:"4px",width:"38px",height:"38px",marginLeft:"10px",border:"1px solid #edeeef",display:"flex-inline"},colorPicker:{position:"absolute",left:"155px",top:"25px",zIndex:1},colorWrapper:{display:"flex",alignItems:"center"},notes:{width:"100%"}}})(ee),re=r.makeStyles(function(e){return{root:{flexGrow:1,height:250},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:l.emphasize("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},divider:{height:e.spacing(2)}}});function ne(e){return q.createElement(r.Typography,G({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)}function ae(e){var t=e.inputRef,r=X(e,["inputRef"]);return q.createElement("div",G({ref:t},r))}function oe(e){var t=e.children,n=e.innerProps,a=e.innerRef,o=e.selectProps,i=o.classes,l=o.TextFieldProps;return q.createElement(r.TextField,G({fullWidth:!0,InputProps:{inputComponent:ae,inputProps:W({className:i.input,ref:a,children:t},n)}},l))}function ie(e){return q.createElement(r.Typography,G({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)}function le(e){return q.createElement(r.Typography,G({className:e.selectProps.classes.singleValue},e.innerProps),e.children)}function ue(e){return q.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}function se(e){return q.createElement(r.Chip,{tabIndex:-1,label:e.children,className:o(e.selectProps.classes.chip,L({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:q.createElement(s.Cancel,e.removeProps)})}function ce(e){return q.createElement(r.Paper,G({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)}ne.propTypes={children:c.node,innerProps:c.object,selectProps:c.object.isRequired},ae.propTypes={inputRef:c.oneOfType([c.func,c.object])},oe.propTypes={children:c.node,innerProps:c.object,innerRef:c.oneOfType([c.func,c.object]),selectProps:c.object.isRequired},c.node,c.object,c.oneOfType([c.func,c.object]),c.bool,c.bool,ie.propTypes={children:c.node,innerProps:c.object,selectProps:c.object.isRequired},le.propTypes={children:c.node,innerProps:c.object,selectProps:c.object.isRequired},ue.propTypes={children:c.node,selectProps:c.object.isRequired},se.propTypes={children:c.node,isFocused:c.bool,removeProps:c.object.isRequired,selectProps:c.object.isRequired},ce.propTypes={children:c.node,innerProps:c.object,selectProps:c.object};var pe={Control:oe,Menu:ce,MultiValue:se,NoOptionsMessage:ne,Placeholder:ie,SingleValue:le,ValueContainer:ue};function de(e){var r=re(),n=l.useTheme(),a=Y(q.useState(null),2),o=(a[0],a[1]),u=Y(q.useState(null),2),s=(u[0],u[1]),c=Y(q.useState(null),2),f=c[0],h=c[1];t.useEffect(function(){e.onMount&&(h(!0),e.onMount().then(function(){h(!1)}))},[]),t.useEffect(function(){e.hasOwnProperty("loading")&&m(e.loading)&&h(e.loading)});var g={input:function(e){return W({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}},b=e.id?"react-select-".concat(e.id):"react-select-".concat(e.name),y=e.defaultValue?{value:e.defaultValue,label:e.defaultValue}:"";return q.createElement(i,G({},e,{value:e.input.value||y,isDisabled:e.disabled,classes:r,styles:g,inputId:b,isLoading:f,TextFieldProps:{error:e.error,label:e.label,InputLabelProps:{htmlFor:b,shrink:!0,error:e.error},placeholder:e.placeholder,disabled:e.disabled},InputProps:{startAdornment:q.createElement(p,{position:"start"},q.createElement(d,null))},options:e.options||[],components:pe,onChange:e.isMulti?function(t){s(t),e.input.onChange(t)}:function(t){o(t),e.input.onChange(t)},onBlur:function(){return e.input.onBlur(e.input.value)}}))}var me=l.makeStyles(function(e){return{progress:{marginRight:e.spacing()},buttonRoot:{marginRight:e.spacing(2)}}}),fe=function(e){var t=me(),r=e.isSubmitting,n=e.sizeCircularProgress,a=e.colorCircularProgress,o=X(e,["isSubmitting","sizeCircularProgress","colorCircularProgress"]);return q.createElement(h,G({type:"submit",className:t.buttonRoot},o),function(e,r,n){return e?q.createElement(f,{size:r,className:t.progress,color:n}):null}(r,n,a),e.children)};fe.propTypes={isSubmitting:c.bool,variant:c.string,color:c.string,sizeCircularProgress:c.number,colorCircularProgress:c.string},fe.defaultProps={variant:"outlined",color:"primary",sizeCircularProgress:20,colorCircularProgress:"inherit"};var he=O.makeStyles({root:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},overlay:{position:"absolute",opacity:.3,backgroundColor:"#CCCCCC",width:"100%",height:"100%"}}),ge=function(){var e=he();return q.createElement(q.Fragment,null,q.createElement("div",{className:e.root},q.createElement("div",{className:e.overlay}),q.createElement(r.CircularProgress,null)))},be=O.makeStyles({root:{fontSize:"16px",fontWeight:600}}),ye=function(e){var t=be();return q.createElement(v,null,q.createElement(P,null,q.createElement(y,{colSpan:e.colSpan,className:t.root},e.sectionLabel)))};ye.defaultProps={colspan:2},ye.propTypes={sectionLabel:c.string.isRequired,colSpan:c.number};var ve=function(e){function t(e){var r;return A(this,t),L(J(r=Q(this,$(t).call(this,e))),"handleChangePage",function(){var e=V(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.props.updatePaginationCallback({page:n});case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),L(J(r),"handleChangeRowsPerPage",function(){var e=V(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.props.updatePaginationCallback({page:0,rowsPerPage:+t.target.value});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),r}return U(t,q.Component),z(t,[{key:"render",value:function(){var e=this.props,t=e.totalNumberOfEntities,r=e.rowsPerPage,n=e.page;return q.createElement(q.Fragment,null,q.createElement(w,{rowsPerPageOptions:[10,20,50],component:"div",count:t,rowsPerPage:r,page:n,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}();ve.propTypes={page:c.number,rowsPerPage:c.number,rowsPerPageOptions:c.array,totalNumberOfEntities:c.number,updatePaginationCallback:c.func},ve.defaultProps={page:0,rowsPerPage:10,totalNumberOfEntities:10,rowsPerPageOptions:[10,20,50],updatePaginationCallback:function(){}};var Pe=O.makeStyles({root:{backgroundColor:"whiteSmoke",textAlign:"center",padding:"1em 0"}}),Ce=function(e){var t=Pe(e),r=e.title;return q.createElement(q.Fragment,null,q.createElement(T,{variant:"h5",component:"h2",className:t.root},r),q.createElement(D,null))};Ce.propTypes={title:c.string.isRequired};var Oe=O.makeStyles({root:{width:"100%",marginTop:"25px",position:"relative"},formRoot:{padding:"1em 1em 0 1em"}}),Ee=function(e){var t=Oe(e),r=e.xs,n=e.sm,a=e.md,o=e.lg,i=e.formComponent,l=e.title,u=e.titleComponent;return q.createElement(S,{container:!0,justify:"center"},q.createElement(S,{item:!0,xs:r,sm:n,md:a,lg:o},q.createElement(C,{className:t.root},l&&q.createElement(u,{title:l}),q.createElement("div",{className:t.formRoot},i&&q.createElement(i,W({},e)),e.children))))};Ee.propTypes={title:c.string,formComponent:c.any,titleComponent:c.any,xs:c.number,sm:c.number,md:c.number,lg:c.number},Ee.defaultProps={titleComponent:Ce,xs:12,sm:10,md:8,lg:8};var we=l.withStyles(function(e){return{root:{width:"100%",marginTop:0,position:"relative",borderBottomLeftRadius:0,borderBottomRightRadius:0},formRoot:{padding:"1em"}}})(Ee),ke=function(e){var t=e.xs,r=e.sm,n=e.md,a=e.lg,o=e.name,i=e.label;switch(e.type){case"min-max":return q.createElement(q.Fragment,null,q.createElement(S,{item:!0,xs:t,sm:r,md:n,lg:a},q.createElement(x.Field,{type:"text",component:ze,name:"".concat(o,"_min"),key:"".concat(i,"_min"),label:"".concat(i," Min")},"".concat(i," Min"))),q.createElement(S,{item:!0,xs:t,sm:r,md:n,lg:a},q.createElement(x.Field,{type:"text",component:ze,name:"".concat(o,"_max"),key:"".concat(i,"_max"),label:"".concat(i," Max")},"".concat(i," Max"))));default:return q.createElement(S,{item:!0,xs:t,sm:r,md:n,lg:a},q.createElement(x.Field,{type:"text",component:ze,name:o,key:i,label:i},i))}};ke.propTypes={name:c.string,label:c.string,type:c.string,xs:c.number,sm:c.number,md:c.number,lg:c.number},ke.defaultProps={xs:12,sm:6,md:3,lg:2};var xe=function(e){function t(e){var r;return A(this,t),L(J(r=Q(this,$(t).call(this,e))),"renderField",function(e){return q.createElement(ke,G({name:e.name,key:e.label,label:e.label,type:e.filter.type},e.filter.size?e.filter.size:{}),e.label)}),L(J(r),"renderFilters",function(){return r.props.tableDefinition.filter(function(e){return e.hasOwnProperty("filter")&&e.filter.hasOwnProperty("type")&&(e.filter.hasOwnProperty("basicFilter")||r.state.isAdvanced)}).map(r.renderField)}),L(J(r),"hasAdvancedFilters",function(){return!!r.props.tableDefinition.filter(function(e){return R(e,["filter","type"])&&!R(e,["filter","basicFilter"])}).length}),L(J(r),"renderChips",function(e){var t=r.props.classes,n=Object.keys(e);return n.length?q.createElement(C,{className:t.chipsContainer},n.map(function(t){return q.createElement(k,{key:t,label:"".concat(t,": ").concat(E.isObject(e[t])?Object.values(e[t]):e[t]),onDelete:r.handleChipDeleteForFilter(t),color:"primary"})})):null}),L(J(r),"onClickExpandHandler",function(e){e.preventDefault(),r.setState({isAdvanced:!r.state.isAdvanced})}),L(J(r),"handleChipDeleteForFilter",function(e){return function(){if(r.state.submittedData.hasOwnProperty(e)){var t=E.omit(r.state.submittedData,e);r.props.changeFieldValue(e,""),r.setState({submittedData:t},function(){r.props.onSubmit(r.state.submittedData)})}}}),L(J(r),"onSubmit",function(){var e=V(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.onSubmit(t);case 2:r.setState({submittedData:t});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),L(J(r),"onCancel",function(){r.props.destroy("TableFilterForm"),r.setState({submittedData:{}}),r.props.onResetCallback&&r.props.onResetCallback()}),r.state={isAdvanced:!1,submittedData:{}},r}return U(t,q.Component),z(t,[{key:"render",value:function(){var e=this.props,t=e.submitting,r=e.classes,n=t?1:0;return q.createElement(we,{xs:12,sm:12,md:12,lg:12},q.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),autoComplete:"off"},q.createElement(S,{container:!0,spacing:1,direction:"row",alignItems:"flex-start",justify:"center"},q.createElement(S,{container:!0,spacing:1},this.renderFilters()),this.hasAdvancedFilters()&&q.createElement(S,{container:!0,spacing:1,justify:"flex-end"},q.createElement(S,{item:!0},q.createElement(h,{onClick:this.onClickExpandHandler},q.createElement(F,null),this.state.isAdvanced?"Hide Advanced Filters":"Show Advanced Filters")))),this.renderChips(this.state.submittedData),q.createElement("div",{className:r.actionsContainer},q.createElement(fe,{type:"submit",variant:"contained",color:"primary",is_submitting:n,disabled:!!t},"Filter"),q.createElement(h,{onClick:this.onCancel},"Cancel"))))}}]),t}();xe.propTypes=W({},x.propTypes,{onResetCallback:c.func,handleSubmit:c.func,onSubmit:c.func,tableDefinition:c.array});var Se=x.reduxForm({form:"TableFilterForm"})(xe),Fe=l.withStyles(function(){return{chipsContainer:{marginTop:"0.5em",padding:"0.25em 0.5em"},actionsContainer:{marginTop:"0.5em"}}})(j.connect(null,function(e){return{changeFieldValue:function(t,r){e(x.change("TableFilterForm",t,r))},arrayRemoveElement:function(t,r){e(x.arrayRemove("TableFilterForm",t,r))}}})(Se)),Te=l.withStyles(function(e){return{root:{backgroundColor:e.palette.common.black}}})(v),De=l.withStyles(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,padding:"0px 10px"},body:{padding:"0px 10px"}}})(y),je=l.withStyles(function(e){return{root:{color:e.palette.common.white,"&:hover":{color:e.palette.common.white},"&$active":{color:e.palette.common.white,"&& $icon":{color:e.palette.common.white}}},active:{color:e.palette.common.white,"&:hover":{color:e.palette.common.white}},icon:{color:e.palette.common.white,"&:hover":{color:e.palette.common.white}}}})(I),Re=function(e){function t(e){var r;return A(this,t),L(J(r=Q(this,$(t).call(this,e))),"descendingComparator",function(e,t,n,a,o,i){return t[n[a]]<e[n[a]]?-1*i:t[n[a]]>e[n[a]]?1*i:a+1!==n.length&&n.length?(a++,"desc"===o.order[o.orderBy[a]]?r.descendingComparator(e,t,n,a,o,1):r.descendingComparator(e,t,n,a,o,-1)):0}),L(J(r),"invokeFetchCallback",function(){r.props.fetchCallback&&r.props.fetchCallback(r.state.filterOptions,r.state.paginationInfo,{order:r.state.order,orderBy:r.state.orderBy})}),L(J(r),"updatePagination",function(e){r.setState({paginationInfo:W({},r.state.paginationInfo,{},e)},r.invokeFetchCallback)}),L(J(r),"applyFilter",function(e){r.setState({filterOptions:W({},e),paginationInfo:W({},r.state.paginationInfo,{page:0})},r.invokeFetchCallback)}),L(J(r),"defaultSorts",function(){return r.tableDefinition.filter(function(e){return e.hasOwnProperty("sort")&&e.sort.hasOwnProperty("defaultSort")}).map(function(e){return{fieldName:{value:e.name,label:e.label},direction:{value:e.sort.defaultSort,label:e.sort.defaultSort}}})}),L(J(r),"onReset",function(){r.setState({filterOptions:{},paginationInfo:W({},r.state.paginationInfo,{page:0,rowsPerPage:r.props.paginatorInfo.rowsPerPage})},r.invokeFetchCallback)}),n(J(r)),r._initialize(e),r.state={filterOptions:{},paginationInfo:e.paginatorInfo,orderBy:[],order:{}},r}return U(t,q.Component),z(t,[{key:"shouldComponentUpdate",value:function(e,t,r){return this._initialize(e),!0}},{key:"_initialize",value:function(e){this.items=E.isArray(e.items)?e.items:Object.values(e.items),this.totalNumberOfEntities=e.totalNumberOfEntities||this.items.length,e.preprocessItemsCallback&&(this.items=e.preprocessItemsCallback(this.items)),this.tableDefinition=this._generateTableDefinition(e)}},{key:"_generateTableDefinition",value:function(e){return e.tableDefinition.length?e.tableDefinition:this.items.length?Object.keys(this.items[0]).map(function(e){return{label:e.charAt(0).toLocaleUpperCase()+e.slice(1),property:e}}):[]}},{key:"renderSectionHeader",value:function(){var e=this.props.sectionLabel;if(e)return q.createElement(ye,{sectionLabel:e,colSpan:this.tableDefinition.length})}},{key:"renderHeader",value:function(){var e=this;return this.tableDefinition?q.createElement(Te,null,q.createElement(P,null,this.tableDefinition.map(function(t,r){return e.renderHeaderCell(t,r)}))):null}},{key:"getComparator",value:function(e){var t=this,r=e.orderBy.map(function(e){return t.props.tableDefinition[e].property});return"desc"===e.order[e.orderBy[0]]?function(n,a){return t.descendingComparator(n,a,r,0,e,1)}:function(n,a){return t.descendingComparator(n,a,r,0,e,-1)}}},{key:"renderBody",value:function(){var e,t=this.props,r=t.autoPaginateItems,n=t.autoSortItems,a=t.sort,o=t.filter,i=t.autoFilter,l=this.state.paginationInfo,u=l.page,s=l.rowsPerPage,c=this.state.filterOptions;if(o&&i){var p,d,m=Object.keys(c);e=this.items.filter(function(e){for(p=0,d=m.length;p<d;p++)if(e[m[p]].toString().indexOf(c[m[p]])<0)return!1;return!0})}else e=this.items;if(a&&n){var f={order:this.state.order,orderBy:this.state.orderBy};e=e.sort(this.getComparator(f))}return q.createElement(b,null,r?e.slice(u*s,(u+1)*s).map(this.renderRow):e.map(this.renderRow))}},{key:"handleSort",value:function(e,t){var r=this.state,n=r.order,a=r.orderBy,o=this.props.multiSort;e.shiftKey&&o?this._isOrderedBy(t)?"asc"===n[t]?n[t]="desc":(delete n[t],a.splice(a.indexOf(t),1)):(n[t]="asc",a.push(t)):(this._isOrderedBy(t)?n=L({},t,"asc"===n[t]?"desc":"asc"):n[t]="asc",a=[t]),this.setState({order:n,orderBy:a},this.invokeFetchCallback)}},{key:"_isOrderedBy",value:function(e){return this.state.orderBy.indexOf(e)>-1}},{key:"_sortOrder",value:function(e){return this.state.orderBy.indexOf(e)+1}},{key:"renderHeaderCell",value:function(e,t){var r=this,n=this.state.order,a=this.props,o=a.sort,i=a.multiSort,l=this._isOrderedBy(t),u=this._sortOrder(t);return q.createElement(De,{key:t,sortDirection:!!l&&n[t]},o&&e.sort&&q.createElement(je,{active:l,direction:l?n[t]:"asc",onClick:function(e){return r.handleSort(e,t)}},e.label),o&&e.sort&&i&&u>0?q.createElement("span",null,"".concat(u)):"",(!o||!e.sort)&&e.label)}},{key:"getCellValue",value:function(e,t){return e.property?"string"==typeof e.property?t[e.property]:E.isArray(e.property)?e.property.reduce(function(e,t){return e&&e.hasOwnProperty(t)?e[t]:""},t):E.isFunction(e.property)?e.property(t):"":""}},{key:"renderCell",value:function(e,t,r){var n=this.getCellValue(t,e);return t.hasOwnProperty("render")?n=t.render(n,e):E.isBoolean(n)&&(n=n?"yes":"no"),q.createElement(De,{key:r},n)}},{key:"renderRow",value:function(e,t){var r=this,n=this.props.classes;return q.createElement(P,{className:n.row,key:t},this.tableDefinition.map(function(t,n){return r.renderCell(e,t,n)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.reloading,a=e.paginator,o=e.filter,i=e.tableFilterFormComponent,l=e.tableDefinition;return q.createElement(C,{className:t.root},o&&q.createElement(i,{onSubmit:this.applyFilter,tableDefinition:l,defaultSort:this.defaultSorts(),onResetCallback:this.onReset}),q.createElement(g,{className:t.table},this.renderSectionHeader(),this.renderHeader(),this.renderBody()),n&&q.createElement(ge,null),n&&q.createElement(r.LinearProgress,null),a&&q.createElement(ve,G({updatePaginationCallback:this.updatePagination},this.state.paginationInfo,{totalNumberOfEntities:this.totalNumberOfEntities})))}}]),t}();Re.propTypes={items:c.oneOfType([c.object,c.array]),tableDefinition:c.array,preprocessItemsCallback:c.func,sectionLabel:c.string,reloading:c.bool,paginator:c.oneOfType([c.bool,c.object]),paginatorInfo:c.object,autoPaginateItems:c.bool,fetchCallback:c.func,filter:c.bool,autoFilter:c.bool,totalNumberOfEntities:c.number,classes:c.object,tableFilterFormComponent:c.any,multiSort:c.bool,sort:c.bool,autoSortItems:c.bool},Re.defaultProps={items:{},tableDefinition:[],reloading:!1,paginator:!1,paginatorInfo:{page:0,rowsPerPage:50,rowsPerPageOptions:[10,20,50]},autoPaginateItems:!1,filter:!1,autoFilter:!1,tableFilterFormComponent:Fe,multiSort:!1,sort:!0,autoSortItems:!1};var Ie=l.withStyles(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto",position:"relative"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},sortOrderNumber:{}}})(Re),Be=function(e){function n(e){var t;return A(this,n),L(J(t=Q(this,$(n).call(this,e))),"generateTableDefinition",function(){return t.props.tableDefinition.map(function(e){return E.isObject(e)?e:{label:e,property:e}}).concat([{label:"Actions",property:t._tableActions}])}),L(J(t),"_tableActions",function(e){return q.createElement(r.IconButton,{"aria-label":"Delete",onClick:function(){return t._handleRemove(e)}},q.createElement(s.Delete,{style:{color:"red"}}))}),L(J(t),"_handleRemove",function(e){var r=t.props,n=r.valueProperty,a=r.name,o=t.getFieldValue();o=o.filter(function(t){return t.value!==e[n]}),t.updateFieldValue(a,o)}),L(J(t),"getOptions",function(e){var r=t.props,n=r.rawOptions;if(r.groupOptionsBy){var a=t.getSelectedGroup();return t.groupOptions(t.filterOptions(n,e,a))}return t.filterOptions(n,e).map(function(e){return t.processOption(e)})}),L(J(t),"getFieldValue",function(){var e=t.props,r=e.getCurrentValue,n=e.name;if(t.refField.current){var a=t.refField.current.context._reduxForm.form;return(r(x.formValueSelector(a),n)||[]).slice(0)}return[]}),L(J(t),"getSelectedGroup",function(){var e=t.props,r=e.getCurrentValue,n=e.name;if(t.refField.current){var a=t.refField.current.context._reduxForm.form,o=r(x.formValueSelector(a),"".concat(n,"_items_groups"));return o?o.value:null}return null}),t.refField=q.createRef(),t}return U(n,t.Component),z(n,[{key:"filterOptions",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.props,a=n.valueProperty,o=n.groupOptionsBy;return e.filter(function(e){return(!t||t&&t.indexOf(e[a])<0)&&(r&&e[o]===r||!r)})}},{key:"processOption",value:function(e){var t=this.props.valueProperty,r=E.isString(this.props.labelProperties)?[this.props.labelProperties]:this.props.labelProperties;return{value:e[t],label:r.map(function(t){return e.hasOwnProperty(t)?e[t]:""}).join(" ")}}},{key:"groupOptions",value:function(e){var t=this,r=this.props.groupOptionsBy,n=e.reduce(function(e,n){return n.hasOwnProperty(r)&&!e.hasOwnProperty(n[r])&&(e[n[r]]=[]),e[n[r]].push(t.processOption(n)),e},{});return Object.keys(n).map(function(e){return{label:e,options:n[e]}})}},{key:"getGroupsFieldOptions",value:function(){var e=this.props,t=e.rawOptions,r=e.groupOptionsBy;return Object.values(t.reduce(function(e,t){return t.hasOwnProperty(r)&&!e.hasOwnProperty(t[r])&&(e[t[r]]={value:t[r],label:t[r]}),e},{}))}},{key:"renderGroupedOptions",value:function(e){var t=this,n=this.props,a=n.label,o=n.name,i=n.groupOptionsBy;return q.createElement(q.Fragment,null,q.createElement(r.Grid,{item:!0,xs:2},q.createElement(x.Field,{name:"".concat(o,"_items_groups"),label:"".concat(i),component:ze,type:"chosenSelect",onChange:function(){t.updateFieldValue("".concat(o,"_items"),null),t.forceUpdate()},options:this.getGroupsFieldOptions()})),q.createElement(r.Grid,{item:!0,xs:7},q.createElement(x.Field,{ref:this.refField,name:"".concat(o,"_items"),label:a,component:ze,type:"chosenSelect",options:this.getOptions(e)})))}},{key:"renderOptions",value:function(e){var t=this.props,n=t.name,a=t.label;return q.createElement(r.Grid,{item:!0,xs:9},q.createElement(x.Field,{ref:this.refField,name:"".concat(n,"_items"),label:a,component:ze,type:"chosenSelect",options:this.getOptions(e)}))}},{key:"updateFieldValue",value:function(e,t){var r=this.props.changeFieldValue;this.refField.current&&r(this.refField.current.context._reduxForm.form,e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.name,o=t.rawOptions,i=t.onChange,l=t.groupOptionsBy,u=t.valueProperty,c=this.getFieldValue(),p=c.map(function(e){return e.value}),d=o.filter(function(e){return p.indexOf(e[u])>=0});return q.createElement(q.Fragment,null,q.createElement(Ie,{sectionLabel:n,items:d,tableDefinition:this.generateTableDefinition()}),q.createElement(r.Grid,{container:!0,spacing:1,direction:"row",alignItems:"flex-end",justify:"center"},l&&this.renderGroupedOptions(p),!l&&this.renderOptions(p),q.createElement(r.Grid,{item:!0,xs:3},q.createElement("div",{className:"actions"},q.createElement(r.Button,{variant:"outlined",onClick:function(){e.refField.current.value&&(c.push(e.refField.current.value),i(c),e.updateFieldValue("".concat(a,"_items"),null),e.updateFieldValue("".concat(a,"_items_groups"),null),e.forceUpdate())}},q.createElement(s.AddCircle,{fontSize:"small"}),"Add ".concat(n))))))}}]),n}();Be.propTypes={label:c.string.isRequired,tableDefinition:c.array.isRequired,labelProperties:c.oneOfType([c.array,c.string]).isRequired,changeFieldValue:c.func,getCurrentValue:c.func,rawOptions:c.array,groupOptionsBy:c.string,valueProperty:c.string},Be.defaultProps={rawOptions:[],valueProperty:"id"};var qe=j.connect(function(e,t){return{getCurrentValue:function(t,r){return t(e,r)}}},function(e,t){return{changeFieldValue:function(t,r,n){e(x.change(t,r,n))}}})(Be),_e=function(e){function t(e){var r;return A(this,t),L(J(r=Q(this,$(t).call(this,e))),"toggleDirection",function(){var e="ASC"===r.state.direction?"DESC":"ASC";r.props.onChange(e),r.setState({direction:e})}),r.state={direction:e.value},r.props.onChange(e.value),r}return U(t,q.Component),z(t,[{key:"render",value:function(){var e=this,t="ASC"===this.state.direction?s.ArrowUpward:s.ArrowDownward,n="ASC"===this.state.direction?"Ascending":"Descending";return q.createElement(r.IconButton,{"aria-label":n,onClick:function(){return e.toggleDirection()}},q.createElement(t,{style:{color:"red"}}))}}]),t}();_e.propTypes={value:c.string},_e.defaultProps={value:"ASC"};var Ne=j.connect(function(e,t){return{getCurrentValue:function(t,r){return t(e,r)}}})(_e),Ve=r.makeStyles(function(e){return{formControl:{marginTop:e.spacing(3),width:"100%"},errorMessage:{marginBottom:e.spacing(1)}}}),Ae=function(e){var t=Ve(),n=e.error;return E.isArray(n)?n.map(function(e,n){return q.createElement(r.Typography,{className:t.errorMessage,key:n,paragraph:!0,color:"error"},e)}):E.isString(n)?q.createElement(r.Typography,{className:t.errorMessage,paragraph:!0,color:"error"},n):null},Me=function(e){switch(e.type){case"select":return n=(t=e).input,a=t.label,t.type,o=t.options,i=t.meta,l=i.touched,u=i.error,q.createElement("div",null,q.createElement("label",{htmlFor:n.name},a),q.createElement("div",null,q.createElement("select",G({},n,{placeholder:a}),q.createElement("option",{key:"_none",value:"",disabled:!0,hidden:!0}),Object.entries(o).map(function(e){var t=Y(e,2),r=t[0],n=t[1];return q.createElement("option",{key:r,value:r},n)})),l&&u&&q.createElement(Ae,{error:u})));case"chosenSelect":return function(e){var t=e.input,r=e.label,n=(e.type,e.loading),a=e.disabled,o=e.defaultValue,i=e.options,l=e.meta,u=l.touched,s=l.error,c=e.onMount,p=e.required,d=Ve();return q.createElement("div",{className:d.formControl},q.createElement(de,{input:t,name:t.name,options:i,isMulti:!1,multi:!1,placeholder:r,label:r+(p?"*":""),error:!!s&&u,onMount:c,loading:n,disabled:a,value:t.value||o}),u&&s&&q.createElement(Ae,{error:s}))}(e);case"chosenMultiSelect":return function(e){var t=e.input,r=e.label,n=(e.type,e.loading),a=e.disabled,o=e.defaultValue,i=e.options,l=e.meta,u=l.touched,s=l.error,c=e.onMount,p=e.required,d=Ve();return q.createElement("div",{className:d.formControl},q.createElement("div",null,q.createElement(de,{input:t,name:t.name,options:i,isMulti:!0,multi:!0,placeholder:r,label:r+(p?"*":""),error:!!s&&u,onMount:c,loading:n,disabled:a,value:t.value||o}),u&&s&&q.createElement(Ae,{error:s})))}(e);case"textarea":return function(e){var t=e.input,n=e.label,a=(e.type,e.meta),o=a.touched,i=a.error,l=e.required;return q.createElement("div",null,q.createElement(r.TextField,{defaultValue:t.value,autoFocus:!!t.autofocus,margin:"dense",multiline:!0,rows:2,rowsMax:20,id:t.id,label:n+(l?"*":""),onChange:function(e){return t.onBlur(e.target.value)},fullWidth:!0,name:t.name,error:!!i&&o}),o&&i&&q.createElement(Ae,{error:i}))}(e);case"checkbox":return function(e){var t=e.input,r=e.checked,n=e.label,a=(e.type,e.meta),o=a.touched,i=a.error;return q.createElement("div",null,q.createElement(Z,{label:n,name:t.name,checked:t.value||r,onChange:t.onChange}),o&&i&&q.createElement(Ae,{error:i}))}(e);case"text":case"password":return function(e){var t=e.input,n=e.label,a=e.helperText,o=e.type,i=e.onChangeHandler,l=e.disabled,u=e.inputProps,s=e.meta,c=s.touched,p=s.error,d=e.required;return q.createElement("div",null,q.createElement(r.TextField,G({},t,{value:"object"===_(t.value)?t.value.label:t.value,autoFocus:!!t.autofocus,margin:"dense",id:t.id,label:n+(d?"*":""),type:o,fullWidth:!0,onChange:function(e){return i&&i(e),t.onBlur(e.target.value)},name:t.name,error:!!p&&c,helperText:a,disabled:l,InputProps:u})),c&&p&&q.createElement(Ae,{error:p}))}(e);case"datePicker":return function(e){var t=e.input,n=e.startDate,a=e.label,o=e.dateFormat,i=e.inputProps,l=e.meta,u=l.touched,s=l.error,c=Ve();return q.createElement("div",{className:c.formControl},q.createElement(B,G({},e,{customInput:q.createElement(r.TextField,{margin:"dense",fullWidth:!0,error:!!s&&u,label:a,InputProps:i}),error:!!s&&u,selected:t.value?t.value:n,onChange:function(e){return t.onChange(e)},dateFormat:o})),u&&s&&q.createElement(Ae,{error:s}))}(e);case"fieldsGroupWrapper":return function(e){var t=e.children,r=(e.input,e.label,e.type,e.meta),n=r.touched,a=r.error;return q.createElement("div",null,t,n&&a&&q.createElement(Ae,{error:a}))}(e);case"color":return function(e){var t=e.input,r=e.label,n=(e.type,e.meta),a=n.touched,o=n.error;return q.createElement("div",null,q.createElement(te,{input:t,name:t.name,label:r}),a&&o&&q.createElement(Ae,{error:o}))}(e);case"multiValueSelect":return function(e){var t=e.input,r=e.label,n=e.tableDefinition,a=e.labelProperties,o=e.groupOptionsBy,i=e.rawOptions,l=e.meta;l.touched,l.error;return q.createElement("div",null,q.createElement(qe,{name:t.name,onChange:t.onChange,label:r,tableDefinition:n,labelProperties:a,rawOptions:i,groupOptionsBy:o}))}(e);case"sortDirectionSwitch":return function(e){var t=e.input,r=e.label,n=e.defaultValue,a=e.meta;a.touched,a.error;return q.createElement("div",null,q.createElement(Ne,{label:r,name:t.name,onChange:t.onChange,value:t.value||n}))}(e);default:return function(e){var t=e.input,r=e.label,n=e.type,a=e.meta,o=a.touched,i=a.error;return q.createElement("div",null,q.createElement("label",{htmlFor:t.name},r),q.createElement("div",null,q.createElement("input",G({},t,{placeholder:r,type:n})),o&&i&&q.createElement(Ae,{error:i})))}(e)}var t,n,a,o,i,l,u},ze=function(e){return q.createElement("div",{className:"form-item"},Me(e))};e.FieldCheckbox=Z,e.FieldColor=te,e.FieldSelect=de,e.FormTitle=Ce,e.FormWrapper=Ee,e.LoadingBox=ge,e.MultiValueSelect=qe,e.RenderErrors=Ae,e.SortDirectionSwitch=Ne,e.SubmitButton=fe,e.Table=Ie,e.renderField=ze,Object.defineProperty(e,"__esModule",{value:!0})});
